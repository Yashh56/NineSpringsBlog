{
  "hash": "135ae9a92275232f884376d200b006b9",
  "result": {
    "markdown": "---\ntitle: \"Local Air Quality\"\ncategories: [environment]\nimage: \"logo.png\"\ndescription: live updates\nformat: \n  html:\n    page-layout: custom\nserver: shiny\n---\n\n::: {.cell context='server'}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"table\" class=\"shiny-html-output\"></div>\n```\n:::\n:::\n\n\n[![](AQI_Table.png)](https://docs.airnowapi.org/docs/DailyDataFactSheet.pdf)\n\n## Additional Resources\n\n[AirNow.gov](https://gispub.epa.gov/airnow/?contours=none&monitors=ozonepm&xmin=-9957200.756211635&xmax=-9954907.645363271&ymin=5322450.583459881&ymax=5323409.629299066&showlegend=yes)\n\n[Air Now Mobile App](https://www.airnow.gov/airnow-mobile-app/)\n\n[Wisconsin Air Quality Monitoring Data](https://airquality.wi.gov/home/map)\n\npreserve5f4b42b6b7b2eb2e\npreserve719a4fb2a720155e\n\n<!--html_preserve-->\n<script type=\"application/shiny-prerendered\" data-context=\"dependencies\">\n{\"type\":\"list\",\"attributes\":{},\"value\":[]}\n</script>\n<!--/html_preserve-->\n<!--html_preserve-->\n<script type=\"application/shiny-prerendered\" data-context=\"execution_dependencies\">\n{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"packages\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"packages\",\"version\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"data.frame\"]},\"row.names\":{\"type\":\"integer\",\"attributes\":{},\"value\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"base\",\"cli\",\"compiler\",\"datasets\",\"digest\",\"ellipsis\",\"evaluate\",\"fastmap\",\"graphics\",\"grDevices\",\"htmltools\",\"htmlwidgets\",\"httpuv\",\"jsonlite\",\"knitr\",\"later\",\"lifecycle\",\"magrittr\",\"methods\",\"mime\",\"promises\",\"R6\",\"Rcpp\",\"rlang\",\"rmarkdown\",\"rstudioapi\",\"shiny\",\"stats\",\"tools\",\"utils\",\"xfun\",\"xtable\",\"yaml\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"4.3.1\",\"3.6.1\",\"4.3.1\",\"4.3.1\",\"0.6.31\",\"0.3.2\",\"0.21\",\"1.1.1\",\"4.3.1\",\"4.3.1\",\"0.5.5\",\"1.6.2\",\"1.6.11\",\"1.8.5\",\"1.43\",\"1.3.1\",\"1.0.3\",\"2.0.3\",\"4.3.1\",\"0.12\",\"1.2.0.1\",\"2.5.1\",\"1.0.10\",\"1.1.1\",\"2.22\",\"0.14\",\"1.7.4\",\"4.3.1\",\"4.3.1\",\"4.3.1\",\"0.39\",\"1.8-4\",\"2.3.7\"]}]}]}\n</script>\n<!--/html_preserve-->",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {
      "preserve5f4b42b6b7b2eb2e": "\n<script type=\"application/shiny-prerendered\" data-context=\"server\">\nsuppressPackageStartupMessages(library(gt))\nsuppressPackageStartupMessages(library(magrittr))\nsuppressPackageStartupMessages(library(dplyr))\nlibrary(shiny)\n\naqi <- read.table(\n  file = \"https://www.airnowapi.org/aq/observation/zipCode/current/?format=text/csv&zipCode=53713&distance=25&API_KEY=223DC9F5-E09A-4A38-A9A4-B6737BA465D2\",\n  sep = \",\", header = TRUE) \ndate <- lubridate::as_date(aqi$DateObserved[1]) %>% lubridate::ymd() %>% format(\"%d %b %Y\")\ntime <- aqi$HourObserved[1] %>% as.character() %>% paste0(\":00\")\ndate_time <- paste(date, time)\n\naqi %<>% dplyr::select(ParameterName, AQI, CategoryName)\n\ncolnames(aqi) %<>% dplyr::recode(\"CategoryName\" = \"Category\", \"ParameterName\" = \"Parameter\")\n\npalette <- scales::col_bin(palette = c(\"#00E400\", \"#FFFF00\", \"#FF7E00\", \"#FF0000\", \"#8F3F97\", \"#7E0023\"),\n                   bins = c(0, 50, 100, 150, 200, 300, 500))\n\naqi_table <- gt(aqi) %>%\n  tab_header(title = \"Current Air Quality in South Madison, WI\", \n             subtitle = date_time) %>%\n  data_color(columns = \"AQI\", fn = palette, target_columns = everything())\n\noutput$table <- shiny::renderTable(aqi_table)\n\n</script>\n",
      "preserve719a4fb2a720155e": "\n<script type=\"application/shiny-prerendered\" data-context=\"server-extras\">\nojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {\n  quos <- rlang::enquos(...)\n  vars <- rlang::list2(...)\n  nm <- names(vars)\n  if (is.null(nm)) {\n    nm <- rep_len(\"\", length(vars))\n  }\n  mapply(function(q, nm, val) {\n    # Infer name, if possible\n    if (nm == \"\") {\n      tryCatch({\n        nm <- rlang::as_name(q)\n      }, error = function(e) {\n        code <- paste(collapse = \"\\n\", deparse(rlang::f_rhs(q)))\n        stop(\"ojs_define() could not create a name for the argument: \", code)\n      })\n    }\n    .session$output[[nm]] <- val\n    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)\n    .session$sendCustomMessage(\"ojs-export\", list(name = nm))\n    NULL\n  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)\n  invisible()\n}\n</script>\n"
    },
    "postProcess": true
  }
}